### 8. Сценарии атрибутов качества

Ниже приведены ключевые сценарии атрибутов качества в формате Stimulus / Response / Measure.

#### QA-01. Масштабируемость голосовых вызовов

- **Stimulus**: Нагрузка на платформу возрастает до 5 000 одновременных голосовых вызовов в рабочее время.  
- **Response**: Сервисы Call Control, SIP Gateway и Media/Recording автоматически масштабируются за счёт добавления реплик; установление вызовов продолжается без деградации.  
- **Measure**: В 95 % случаев время установления вызова не превышает 3 секунд; потери вызовов из-за исчерпания ресурсов не более 0.1 %.

#### QA-02. Отказоустойчивость при отказе узла кластера

- **Stimulus**: Один из рабочих узлов Kubernetes-кластера выходит из строя.  
- **Response**: Поды микросервисов автоматически перезапускаются на других узлах; новые сессии устанавливаются без ошибок, активные вызовы минимально затронуты.  
- **Measure**: Время восстановления целевого числа реплик сервисов — не более 5 минут; доля неуспешных операций в момент отказа — не более 1 %.

#### QA-03. Аутентификация и безопасность доступа

- **Stimulus**: Пользователь пытается получить доступ к UC-сервисам без действительного токена доступа или с токеном, не соответствующим требуемой роли.  
- **Response**: Доступ отклоняется; событие фиксируется в журнале аудита и экспортируется в систему мониторинга/ИБ.  
- **Measure**: 100 % неавторизованных запросов блокируются; запись в аудит создаётся не позднее 1 секунды после события.

#### QA-04. Наблюдаемость и трассировка запросов

- **Stimulus**: Оператор эксплуатации анализирует инцидент с повышенной задержкой установления вызовов.  
- **Response**: В системе доступны метрики, логи и распределённые трассировки по единому trace-id, позволяющие выявить «узкое место» (Call Control, SIP Gateway, Media или сеть).  
- **Measure**: Среднее время локализации корневой причины инцидента — не более 30 минут.

#### QA-05. Производительность чата

- **Stimulus**: Пользователи активно обмениваются сообщениями в рабочих чатах (до 1 000 сообщений в минуту в пределах одного кластера).  
- **Response**: Сообщения доставляются без заметных задержек, история корректно сохраняется в хранилище.  
- **Measure**: 95-й перцентиль времени доставки сообщения — не более 1 секунды; отсутствие потери сообщений.

#### QA-06. Обновление без простоя (rolling upgrade)

- **Stimulus**: Выкатывается новая версия сервиса Call Control.  
- **Response**: Обновление происходит по стратегии rolling update; новые запросы постепенно переводятся на новую версию, активные сессии сохраняются по возможности.  
- **Measure**: Доля неуспешных попыток установления вызовов в период обновления — не более 0.5 %; нет полной недоступности сервиса.

#### QA-07. Защита медиаданных

- **Stimulus**: Внешний злоумышленник пытается перехватить медиапоток голосового вызова в корпоративной сети.  
- **Response**: Медиапотоки зашифрованы (SRTP/DTLS для WebRTC, TLS/SRTP для SIP); попытка расшифровки без ключей невозможна.  
- **Measure**: Отсутствие незашифрованного медиатрафика на внешних интерфейсах; проверяется регулярно автоматизированными тестами и аудитом конфигурации.

#### QA-08. Управление конфиденциальными данными (записи и CDR)

- **Stimulus**: Оператор контакт-центра пытается получить доступ к записям разговоров вне своей зоны ответственности.  
- **Response**: Доступ блокируется политиками RBAC и атрибутной авторизацией; попытка фиксируется в журнале безопасности.  
- **Measure**: 100 % несанкционированных попыток доступа блокируются; отчёт по попыткам доступен руководству и службе ИБ.

#### QA-09. Восстановление после сбоя хранилища

- **Stimulus**: Сбой основного узла СУБД, используемой для транзакционных данных UC-платформы.  
- **Response**: Включается механизм репликации/фейловера на резервный узел; система переводится в рабочий режим.  
- **Measure**: Время переключения на резерв — не более 5 минут; потеря подтверждённых транзакций отсутствует или минимальна (в пределах RPO, согласованного с бизнесом).

#### QA-10. Расширяемость API для новых интеграций

- **Stimulus**: Появляется потребность подключить новую внешнюю систему (например, дополнительную CRM) к UC-платформе.  
- **Response**: Новая интеграция реализуется через существующий API Gateway и событийную шину без изменения базовой архитектуры и критичных сервисов.  
- **Measure**: Время реализации типовой интеграции — не более 4–6 недель; отсутствует необходимость остановки существующих сервисов.