### ADR-001. Архитектурный стиль и границы сервисов (DDD/Bounded Contexts)

- **Статус**: Принято

#### Контекст

Платформа унифицированных коммуникаций включает несколько доменов: идентификация и доступ, управление вызовами, сообщения/чаты, presence, медиа/запись, биллинг/CDR, нотификации, provisioning и наблюдаемость. Необходимо определить архитектурный стиль и принципы разбиения на сервисы, обеспечивающие масштабируемость (AD-01), отказоустойчивость (AD-02), сопровождаемость (AD-06) и оптимизацию TCO (AD-07).

Диаграмма `10_diagrams/c4_containers.puml` уже отражает базовое разбиение на контейнеры.

#### Решение

- Выбран **микросервисный архитектурный стиль**, опирающийся на принципы DDD и выделение **bounded contexts**:
  - `Identity/IAM`, `Call Control`, `Messaging/Chat`, `Presence`, `Media/Recording`, `Provisioning`, `Billing/CDR`, `Notification`, `Observability`.
- Каждый bounded context реализуется одним или несколькими микросервисами, представляемыми как отдельные контейнеры на C4 Container Diagram.
- Взаимодействие между bounded contexts осуществляется через публичные API и событийную шину; прямой доступ к данным другого контекста запрещён.
- Сервисы проектируются с возможностью независимого деплоя и масштабирования.

Связь с артефактами:

- Архитектурные драйверы: **AD-01**, **AD-02**, **AD-04**, **AD-06**, **AD-07**.
- Диаграммы: `c4_context.puml`, `c4_containers.puml`, `deployment.puml`.
- Разделы решения: `09_solution/index.md` (описание микросервисной UC-архитектуры).

#### Альтернативы

- **Монолитное приложение**: единое приложение для всех доменов.
  - Плюсы: упрощённое начальное внедрение, меньше накладных расходов на инфраструктуру.
  - Минусы: слабая масштабируемость по доменам, сложность независимых релизов, повышенный риск инцидентов при изменениях.
- **Крупные доменные сервисы (coarse-grained SOA)**:
  - Плюсы: меньшее число сервисов, чем при «чистых» микросервисах.
  - Минусы: со временем могут превратиться в «мини-монолиты», усложняющие эволюцию.

#### Последствия

- Положительные:
  - Возможность независимо развивать и масштабировать домены UC-платформы.
  - Лучшее соответствие организационной структуре команд (team per bounded context).
  - Облегчённая трассировка влияния изменений на конкретные домены.
- Отрицательные:
  - Усложнение инфраструктуры (оркестрация, сеть, observability).
  - Повышенные требования к инженерной культуре (CI/CD, мониторинг, управление версиями API).

