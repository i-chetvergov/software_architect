# Контекст системы

**Проект:** Платформа унифицированных коммуникаций (Unified Communications, UC) для корпоративного использования

---

## Стейкхолдеры и их потребности

### Основные группы стейкхолдеров

**Бизнес-заказчик (CIO/Head of Digital)**

**Роль:** Отвечает за цифровую трансформацию, эффективность коммуникаций и сокращение TCO ИТ-ландшафта.

**Потребности:**
- Снижение совокупной стоимости владения (TCO) коммуникационной инфраструктуры на 30–40%
- Ускорение вывода новых цифровых сервисов на рынок
- Обеспечение соответствия регуляторным требованиям и стандартам безопасности
- Прозрачность использования ресурсов и затрат

**Критерии успеха:**
- Сокращение количества коммуникационных систем с 5–7 до 1
- Снижение времени на интеграцию новых сервисов с месяцев до недель
- Обеспечение SLA 99.9% для критичных коммуникационных сервисов

**Руководители бизнес-подразделений**

**Роль:** Заинтересованы в повышении продуктивности команд, качестве обслуживания клиентов и доступности омниканальных сценариев.

**Потребности:**
- Повышение продуктивности сотрудников за счёт единого интерфейса и интеграции с бизнес-системами
- Улучшение качества обслуживания клиентов через омниканальные сценарии
- Сокращение времени на обучение новых сотрудников
- Автоматизация рутинных процессов взаимодействия

**Критерии успеха:**
- Сокращение времени на коммуникации на 15–20%
- Улучшение показателей удовлетворённости клиентов
- Сокращение времени обучения новых сотрудников на 30%

**Служба эксплуатации и ИБ**

**Роль:** Отвечает за непрерывность работы, информационную безопасность, соответствие регуляторным требованиям и управляемость инфраструктуры.

**Потребности:**
- Единая система мониторинга и управления коммуникационной инфраструктурой
- Централизованный контроль доступа и аудит
- Быстрое обнаружение и устранение инцидентов
- Соответствие требованиям регуляторов (GDPR, отраслевые стандарты)

**Критерии успеха:**
- Время обнаружения инцидентов ≤ 5 минут
- Время восстановления после сбоя ≤ 15 минут
- 100% покрытие аудитом критичных операций

**Конечные пользователи (сотрудники и контакт-центры)**

**Роль:** Используют коммуникационные сервисы в ежедневной работе.

**Потребности:**
- Удобный, единый и предсказуемый интерфейс для всех типов коммуникаций
- Быстрый доступ к контактам и истории взаимодействий
- Интеграция с корпоративными системами (CRM, Service Desk)
- Мобильность и доступность с различных устройств

**Критерии успеха:**
- Время установления вызова ≤ 3 секунд
- Задержка доставки сообщений ≤ 1 секунды (P95)
- Единый интерфейс для всех типов коммуникаций

**Внешние партнёры и интеграторы**

**Роль:** Разрабатывают и сопровождают интеграции UC-платформы с внешними системами и каналами взаимодействия.

**Потребности:**
- Стандартизированные API и протоколы для интеграций
- Документация и примеры использования
- Возможность независимого тестирования интеграций
- Гибкость в выборе технологий интеграции

**Критерии успеха:**
- Время реализации типовой интеграции ≤ 4–6 недель
- Наличие полной документации API
- Поддержка стандартных протоколов (REST, gRPC, Webhooks, Events)

---

## Внешние системы и интеграции

### Корпоративные каталоги и IAM

**Системы:**
- Active Directory / LDAP
- Корпоративные IdP (OIDC/SAML): Okta, Azure AD, Keycloak

**Тип интеграции:** Синхронная аутентификация и авторизация через OIDC/SAML 2.0

**Требования:**
- Поддержка федерации идентичности
- Единый вход (SSO)
- Многофакторная аутентификация (MFA)
- Синхронизация пользователей и групп

**Связь с архитектурой:** Интеграция через IAM Service (см. диаграмму C4 Context и C4 Containers)

### Бизнес-системы

**Системы:**
- CRM (Salesforce, Microsoft Dynamics, SAP CRM)
- ERP (SAP ERP, Oracle ERP)
- Service Desk (Jira Service Management, ServiceNow, Zendesk)
- HRM (SAP SuccessFactors, Workday)

**Тип интеграции:** REST API, Webhooks, Events (асинхронные)

**Требования:**
- Отображение карточки клиента при входящем звонке
- Клик-ту-колл из CRM
- Логирование коммуникаций в бизнес-системах
- Синхронизация контактов и календарей

**Связь с архитектурой:** Интеграция через API Gateway и событийную шину (см. диаграмму C4 Context)

### Операторские сети и PSTN

**Системы:**
- SIP-транки от операторов связи
- Операторские SBC (Session Border Controller)
- Телефонные номера (DID)

**Тип интеграции:** SIP-транки через SBC

**Требования:**
- Безопасная маршрутизация SIP-трафика
- Нормализация сигнализации
- Защита от атак (DDoS, SIP-флуд)
- Транскодирование кодеков

**Связь с архитектурой:** Интеграция через SIP Gateway / SBC (см. диаграмму C4 Containers и Deployment)

### Клиентские приложения

**Типы:**
- Веб-клиенты (WebRTC, WebTransport)
- Мобильные приложения (iOS/Android)
- Desktop-приложения (Windows, macOS, Linux)
- Аппаратные SIP-телефоны
- Конференц-терминалы

**Тип интеграции:** WebRTC, WebTransport, SIP, REST API

**Требования:**
- Кроссплатформенность
- Низкая задержка для real-time коммуникаций
- Поддержка различных кодеков
- Адаптация к качеству сети

**Связь с архитектурой:** Интеграция через WebRTC Gateway и API Gateway (см. диаграмму C4 Context)

### Системы мониторинга и логирования

**Системы:**
- SIEM (Security Information and Event Management)
- APM (Application Performance Monitoring)
- NMS (Network Management System)
- Корпоративные системы логирования

**Тип интеграции:** Экспорт метрик, логов и событий (OpenTelemetry, Prometheus, Syslog)

**Требования:**
- Единый формат метрик и логов
- Корреляция событий по trace-id
- Экспорт в существующие системы мониторинга
- Поддержка алертов и дашбордов

**Связь с архитектурой:** Интеграция через Observability Stack (см. диаграмму Deployment)

---

## Организационный и технологический контекст

### Организационный контекст

**Текущее состояние:**
- Организация находится в процессе консолидации коммуникационной инфраструктуры
- Миграция от нескольких разрозненных решений к единой UC-платформе
- Поэтапное внедрение с минимальным влиянием на текущие операции

**Стратегические направления:**
- Цифровая трансформация коммуникаций
- Консолидация ИТ-ландшафта
- Повышение эффективности и снижение TCO

### Технологический контекст

**Инфраструктура:**
- Смешанная среда: on-premise и облачные компоненты
- Стратегическое направление — контейнеризация и использование Kubernetes
- Стандартизация на открытых технологиях и протоколах

**Существующие системы:**
- Ряд критичных систем (CRM, биллинг, некоторые телеком-компоненты) могут оставаться монолитными или проприетарными
- Требуются надёжные и стандартизованные интерфейсы интеграции
- Необходимость поддержки legacy-систем в переходный период

**Технологические стандарты:**
- Протоколы: SIP, WebRTC, OAuth2.1/OIDC, REST, gRPC
- Форматы данных: JSON, Protocol Buffers
- Инфраструктура: Kubernetes, Docker, Linux

---

## Границы системы

### Внутренняя граница системы (UC Platform)

В рамках настоящего архитектурного описания UC-платформа рассматривается как **внутренне ограниченная система**, включающая:

**Микросервисы управления идентичностями и доступом**
- **IAM / Identity Service:** аутентификация, авторизация, управление пользователями
- **API Gateway:** единая точка входа, маршрутизация, rate limiting, версионирование API

**Сигнальные шлюзы и слой управления вызовами**
- **Call Control Service:** управление жизненным циклом вызовов, маршрутизация, правила
- **SIP Gateway / SBC:** интеграция с PSTN, нормализация сигнализации, защита
- **WebRTC Gateway:** обработка WebRTC-сигнализации и медиа для браузерных клиентов

**Сервисы коммуникаций**
- **Presence Service:** управление статусами пользователей
- **Messaging / Chat Service:** обмен текстовыми и мультимедийными сообщениями
- **Media / Recording Service:** обработка медиапотоков, запись разговоров

**Подсистемы управления и аналитики**
- **Provisioning Service:** управление пользователями, номерами, конфигурацией
- **Billing / CDR Service:** сбор детализации вызовов, биллинг, отчётность
- **Notification Service:** отправка уведомлений (email, SMS, push)
- **Observability Stack:** метрики, логи, трассировки, дашборды

**Визуализация:** Граница системы отражена на диаграмме C4 Context (см. раздел `10. Диаграммы`)

### Окружающая среда (внешний контекст)

Всё, что находится за границами UC-платформы, рассматривается как **внешний контекст**:

**Внешние сети и операторские платформы**
- PSTN / операторские сети
- Интернет
- Корпоративные сети

**Корпоративные информационные системы**
- CRM, ERP, Service Desk, HRM
- Системы мониторинга и логирования
- Корпоративные каталоги и IdP

**Пользователи и обслуживающий персонал**
- Конечные пользователи (сотрудники, контакт-центры)
- Администраторы UC-платформы
- Операторы эксплуатации

### Граница системы как контракт

Граница системы фиксируется в виде:

- **Набора API:** REST, gRPC, WebSocket, WebRTC
- **Протоколов:** SIP, OIDC/SAML, HTTP/HTTPS
- **Событий:** асинхронные события через брокер сообщений
- **Форматов данных:** JSON, Protocol Buffers, CDR

Всё, что находится за этими границами, моделируется на уровне контрактов и допущений, без детальной проработки внутренней реализации внешних систем.

**Связь с диаграммами:**
- Граница системы визуализирована на диаграмме C4 Context
- Детализация внутренней структуры — на диаграмме C4 Containers
- Физическое размещение — на диаграмме Deployment

---

## Связь с последующими разделами

Контекст системы служит основой для:

- **Раздела 3. Бизнес-цели** — формулирования целей с учётом потребностей стейкхолдеров
- **Раздела 4. Архитектурные драйверы** — выявления ключевых факторов, влияющих на архитектурные решения
- **Раздела 5. Ограничения** — фиксации ограничений, связанных с внешними системами и организационным контекстом
- **Раздела 6. Требования** — детализации требований к интеграциям и взаимодействию с внешними системами
- **Раздела 9. Архитектурное решение** — обоснования выбора архитектурных паттернов и технологий

Трассировка контекста к решениям обеспечивается через архитектурные драйверы и фиксируется в соответствующих ADR.
