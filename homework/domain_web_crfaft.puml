@startuml
skinparam linetype ortho
skinparam classAttributeIconSize 0
left to right direction
title Доменная модель "Мир веб-крафта"

class Аккаунт {
  id : uuid
  электронная_почта : строка
  статус : enum{активен, заблокирован, ожидает_подтверждения}
}

class Профиль {
  id : uuid
  никнейм : строка
  регион : строка
  рейтинг : число
}

class Инвентарь {
  id : uuid
}

class Предмет {
  id : uuid
  артикул : строка
  тип : enum{оружие, броня, ресурс, прочее}
  характеристики : строка
}

class Валюта {
  id : uuid
  код : строка
  баланс : число
}

class Заказ {
  id : uuid
  сумма : число
  статус : enum{новый, оплачен, отменён}
}

class Платёж {
  id : uuid
  провайдер : строка
  статус : enum{создан, выполнен, ошибка}
  внешний_id : строка
}

class Карта {
  id : uuid
  название : строка
  версия : строка
  владелец : uuid
  статус : enum{активна, на_модерации, скрыта}
}

class НаборПравил {
  id : uuid
  хэш_скрипта : строка
  версия : строка
  статус : enum{активен, тест, архив}
}

class Контент {
  id : uuid
  тип : строка
  владелец : uuid
  статус : enum{черновик, опубликован, отклонён}
}

class Модерация {
  id : uuid
  контент_id : uuid
  вердикт : enum{одобрено, отклонено, ожидание}
}

class Лобби {
  id : uuid
  регион : строка
  количество_слотов : число
}

class Матч {
  id : uuid
  сервер_id : uuid
  начало : строка
  окончание : строка
  результат : строка
}

class ИгровойСервер {
  id : uuid
  регион : строка
  вместимость : число
  статус : enum{в_работе, недоступен}
}

class Сообщение {
  id : uuid
  канал : строка
  текст : строка
}

class Турнир {
  id : uuid
  видимость : enum{открытый, по_приглашению}
  правила : строка
  сетка : строка
}

class Приглашение {
  id : uuid
  турнир_id : uuid
  аккаунт_id : uuid
  статус : enum{отправлено, принято, отклонено}
}

class Наблюдатель {
  аккаунт_id : uuid
  матч_id : uuid
  задержка_сек : число
}

' --- Связи между сущностями ---
Аккаунт "1" -- "1" Профиль
Профиль "1" -- "1" Инвентарь
Инвентарь "1" o-- "*" Предмет
Инвентарь "1" o-- "*" Валюта

Заказ "*" --> "1" Аккаунт
Платёж "1" --> "1" Заказ

Лобби "1" o-- "1" Карта
Лобби "1" o-- "1" НаборПравил

Матч "*" --> "1" Лобби
Матч "*" --> "1" ИгровойСервер

Сообщение "*" --> "1" Матч
Сообщение "*" --> "1" Аккаунт

Контент "*" --> "1" Аккаунт
Контент "1" -- "0..1" Модерация

Турнир "1" o-- "*" Приглашение
Турнир "1" o-- "*" Матч

Наблюдатель "*" --> "1" Матч
@enduml