

Документ содержит краткое описание трёх созданных диаграмм:  
1) диаграммы контейнеров,  
2) диаграммы данных,  
3) диаграммы развертывания.  

Текст сформирован в стиле системного аналитика: кратко, структурировано, без пересказа очевидного из визуальных моделей.

---

## 1. Диаграмма контейнеров (C4 — уровень Container)

**Файл:** `containers_web_craft.puml`  
**Описание:**  
Диаграмма демонстрирует архитектуру приложения на уровне основных сервисов и их взаимодействия. Система разделена на несколько доменов: игровой процесс, монетизация, UGC (контент), социальные функции и платформенные сервисы.  
Каждый домен представлен отдельным набором микросервисов, которые обрабатывают API-запросы через единый API-шлюз/WAF.  

Фронтенд — WebAssembly/WebGL клиент, работающий в браузере и взаимодействующий с backend через REST/gRPC и отдельный поток WebTransport/UDP для игровых матчей.  

Слой данных структурирован по доменам: каждый микросервис использует свою выделенную БД или коллекцию (PostgreSQL, DocumentDB, Time-series хранилище, Redis). В диаграмме показаны только ключевые связи, чтобы повысить читаемость, а узлы логически сгруппированы по пакетам.

Эта диаграмма служит основой для двух последующих уровней — данных и развертывания.

---

## 2. Диаграмма данных (Database Layer Decomposition)

**Файл:** `database_web_craft.puml`  
**Описание:**  
Цель диаграммы — показать логику хранения данных, распределённых между несколькими типами БД.  
Мы выделили пять независимых подсистем данных:

1. **DB_ACCOUNTS (PostgreSQL):**  
   Аккаунты, сессии, профили игроков, настройки, feature flags.  
2. **DB_GAMEPLAY (PostgreSQL):**  
   Очереди матчмейкинга, лобби, матчи, результаты, структуры турниров.  
3. **DB_COMMERCE (PostgreSQL):**  
   Каталог товаров, заказы, транзакции, состояния инвентаря игрока.  
4. **DB_UGC (DocumentDB / Mongo):**  
   Пользовательские карты, UGC-объекты, статусы модерации.  
5. **DB_METRICS (Time-series / Column DB):**  
   Технические и бизнес-метрики (матчи, платежи, активность игроков).

Также в состав слоя данных входит:
- **Redis-кластер** для кэширования (очереди, профили, лобби, feature-flags),
- **Kafka/RabbitMQ** — для событий между доменами (платежи, модерация, матчи).

В диаграмме добавлены заметки с кратким описанием назначения каждой таблицы/коллекции, чтобы снизить потребность в отдельной документации.

---

## 3. Диаграмма развертывания (Deployment Diagram)

**Файл:** `deployment_web_craft.puml`  
**Описание:**  
Диаграмма показывает физическое размещение всех компонентов системы в инфраструктуре облачного провайдера.

Архитектура включает три ключевых уровня:

### 3.1. Клиентский слой  
Пользовательский браузер, CDN для ассетов, подключение к API и игровым серверам.

### 3.2. Облачный backend  
Состоит из:
- **Публичной подсети** — API Gateway / WAF.  
- **Kubernetes-кластера приложений** — микросервисные Pods по доменам.  
- **Пула игровых серверов** — отдельная группа узлов с autoscaling для real-time нагрузки.  

### 3.3. Слой данных  
В отдельной приватной подсети расположены:
- PostgreSQL HA-кластер (три выделенные базы),
- DocumentDB,
- Time-series DB,
- Redis-кластер,
- Kafka/RabbitMQ.

---
