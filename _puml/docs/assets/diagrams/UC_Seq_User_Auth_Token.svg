<?plantuml 1.2026.0?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="678px" preserveAspectRatio="none" style="width:995px;height:678px;background:#FFFFFF;" version="1.1" viewBox="0 0 995 678" width="995px" zoomAndPan="magnify"><defs/><g><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="User" id="part1-lifeline"><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="347.7266" width="8" x="19.1826" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="81.4883" y2="429.2148"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="23" x2="23" y1="429.2148" y2="470.1699"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="127.2422" width="8" x="19.1826" y="470.1699"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="470.1699" y2="597.4121"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Client" id="part2-lifeline"><g><title>UC Web Client</title><rect fill="#000000" fill-opacity="0.00000" height="347.7266" width="8" x="205.835" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="209.6655" x2="209.6655" y1="81.4883" y2="429.2148"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="209.6655" x2="209.6655" y1="429.2148" y2="470.1699"/><g><title>UC Web Client</title><rect fill="#000000" fill-opacity="0.00000" height="127.2422" width="8" x="205.835" y="470.1699"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="209.6655" x2="209.6655" y1="470.1699" y2="597.4121"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="APIGW" id="part3-lifeline"><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="347.7266" width="8" x="412.6538" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="416.3647" x2="416.3647" y1="81.4883" y2="429.2148"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="416.3647" x2="416.3647" y1="429.2148" y2="470.1699"/><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="127.2422" width="8" x="412.6538" y="470.1699"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="416.3647" x2="416.3647" y1="470.1699" y2="597.4121"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="IAM" id="part4-lifeline"><g><title>IAM Service</title><rect fill="#000000" fill-opacity="0.00000" height="347.7266" width="8" x="609.8877" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="613.1313" x2="613.1313" y1="81.4883" y2="429.2148"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="613.1313" x2="613.1313" y1="429.2148" y2="470.1699"/><g><title>IAM Service</title><rect fill="#000000" fill-opacity="0.00000" height="127.2422" width="8" x="609.8877" y="470.1699"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="613.1313" x2="613.1313" y1="470.1699" y2="597.4121"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="IdP" id="part5-lifeline"><g><title>Identity Provider . IdP</title><rect fill="#000000" fill-opacity="0.00000" height="347.7266" width="8" x="904.4565" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="908.4165" x2="908.4165" y1="81.4883" y2="429.2148"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="908.4165" x2="908.4165" y1="429.2148" y2="470.1699"/><g><title>Identity Provider . IdP</title><rect fill="#000000" fill-opacity="0.00000" height="127.2422" width="8" x="904.4565" y="470.1699"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="908.4165" x2="908.4165" y1="470.1699" y2="597.4121"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="User" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="5" y="78.5352">User</text><ellipse cx="23.1826" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.1826,21.5 L23.1826,48.5 M10.1826,29.5 L36.1826,29.5 M23.1826,48.5 L10.1826,63.5 M23.1826,48.5 L36.1826,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="User" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="5" y="609.9473">User</text><ellipse cx="23.1826" cy="621.4004" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.1826,629.4004 L23.1826,656.4004 M10.1826,637.4004 L36.1826,637.4004 M23.1826,656.4004 L10.1826,671.4004 M23.1826,656.4004 L36.1826,671.4004" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Client" id="part2-head"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.3389" x="154.6655" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.3389" x="161.6655" y="70.5352">UC Web Client</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Client" id="part2-tail"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.3389" x="154.6655" y="596.4121"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.3389" x="161.6655" y="616.9473">UC Web Client</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="APIGW" id="part3-head"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.5781" x="368.3647" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.5781" x="375.3647" y="70.5352">API Gateway</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="APIGW" id="part3-tail"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.5781" x="368.3647" y="596.4121"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.5781" x="375.3647" y="616.9473">API Gateway</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="IAM" id="part4-head"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.5127" x="568.1313" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5127" x="575.1313" y="70.5352">IAM Service</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="IAM" id="part4-tail"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.5127" x="568.1313" y="596.4121"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5127" x="575.1313" y="616.9473">IAM Service</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="IdP" id="part5-head"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.0801" x="827.4165" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148.0801" x="834.4165" y="70.5352">Identity Provider / IdP</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="IdP" id="part5-tail"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162.0801" x="827.4165" y="596.4121"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148.0801" x="834.4165" y="616.9473">Identity Provider / IdP</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="197.835,108.7988,207.835,112.7988,197.835,116.7988,201.835,112.7988" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.1826" x2="203.835" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.6523" x="30.1826" y="108.0566">&#1054;&#1090;&#1082;&#1088;&#1099;&#1074;&#1072;&#1077;&#1090; UC Web Client</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="404.6538,138.1094,414.6538,142.1094,404.6538,146.1094,408.6538,142.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="209.835" x2="410.6538" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.0767" x="216.835" y="137.3672">GET /login (redirect request)</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg3"><polygon fill="#181818" points="601.8877,167.4199,611.8877,171.4199,601.8877,175.4199,605.8877,171.4199" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="416.6538" x2="607.8877" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.5669" x="423.6538" y="166.6777">Start OIDC flow</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg4"><polygon fill="#181818" points="896.4565,196.7305,906.4565,200.7305,896.4565,204.7305,900.4565,200.7305" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="613.8877" x2="902.4565" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.9082" x="620.8877" y="195.9883">Redirect user to IdP /authorize</text></g><g class="message" data-entity-1="part5" data-entity-2="part1" id="msg5"><polygon fill="#181818" points="34.1826,226.041,24.1826,230.041,34.1826,234.041,30.1826,230.041" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="28.1826" x2="907.4565" y1="230.041" y2="230.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.4434" x="40.1826" y="225.2988">&#1051;&#1086;&#1075;&#1080;&#1085;/&#1087;&#1072;&#1088;&#1086;&#1083;&#1100; / MFA</text></g><g class="message" data-entity-1="part1" data-entity-2="part5" id="msg6"><polygon fill="#181818" points="896.4565,255.3516,906.4565,259.3516,896.4565,263.3516,900.4565,259.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="23.1826" x2="902.4565" y1="259.3516" y2="259.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.125" x="30.1826" y="254.6094">Credentials / Consent</text></g><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg7"><polygon fill="#181818" points="624.8877,284.6621,614.8877,288.6621,624.8877,292.6621,620.8877,288.6621" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="618.8877" x2="907.4565" y1="288.6621" y2="288.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.8525" x="630.8877" y="283.9199">Authorization Code</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg8"><polygon fill="#181818" points="896.4565,313.9727,906.4565,317.9727,896.4565,321.9727,900.4565,317.9727" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="613.8877" x2="902.4565" y1="317.9727" y2="317.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.0596" x="620.8877" y="313.2305">Token request (code exchange)</text></g><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg9"><polygon fill="#181818" points="624.8877,343.2832,614.8877,347.2832,624.8877,351.2832,620.8877,347.2832" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="618.8877" x2="907.4565" y1="347.2832" y2="347.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270.5688" x="630.8877" y="342.541">ID Token + Access Token + Refresh Token</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg10"><polygon fill="#181818" points="427.6538,372.5938,417.6538,376.5938,427.6538,380.5938,423.6538,376.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="421.6538" x2="612.8877" y1="376.5938" y2="376.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.2339" x="433.6538" y="371.8516">Validated token + user info</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg11"><polygon fill="#181818" points="220.835,417.2148,210.835,421.2148,220.835,425.2148,216.835,421.2148" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="214.835" x2="415.6538" y1="421.2148" y2="421.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.5815" x="226.835" y="401.1621">Set session / tokens</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.3184" x="226.835" y="416.4727">(SPA storage / cookie)</text></g><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117.627" x="407.0061" y="453.8496">&#1044;&#1072;&#1083;&#1100;&#1085;&#1077;&#1081;&#1096;&#1080;&#1077; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1099;</text><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg12"><polygon fill="#181818" points="404.6538,487.4805,414.6538,491.4805,404.6538,495.4805,408.6538,491.4805" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="209.835" x2="410.6538" y1="491.4805" y2="491.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.8188" x="216.835" y="486.7383">HTTPS /api/... (access token)</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg13"><polygon fill="#181818" points="601.8877,516.791,611.8877,520.791,601.8877,524.791,605.8877,520.791" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="416.6538" x2="607.8877" y1="520.791" y2="520.791"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.1294" x="423.6538" y="516.0488">Introspect/validate token</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg14"><polygon fill="#181818" points="427.6538,546.1016,417.6538,550.1016,427.6538,554.1016,423.6538,550.1016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="421.6538" x2="612.8877" y1="550.1016" y2="550.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.9287" x="433.6538" y="545.3594">OK / scopes / roles</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg15"><polygon fill="#181818" points="220.835,575.4121,210.835,579.4121,220.835,583.4121,216.835,579.4121" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="214.835" x2="415.6538" y1="579.4121" y2="579.4121"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.6699" x="226.835" y="574.6699">Protected resource / success</text></g><?plantuml-src RLF1RXCn4BtxAqQza0gHlVU0j4eXh53LLPFI2nVZdIHML-jWEodbL5e4I4M20pSalY42HPHMeRzW_n5ZxwPAGY_P7VlDx7lpNXw0--el_BcRkmNzNldtxifTkvd_GEzVmDswl-x6VtQ_wVcJZWFm9bnSBUyk_CVGJ6rpu4AWCM3LCLQCSM6LXaE36hY9JpRcsaeXnxooi7NOWIDy1PrIOcMt0gP-NKUbUGPTRl64dqOCrTsZTKYMxa4FzLGAZ12gDm05ZPNs57Ajfh8WGWbaHLw3YvonIFBHuuO0x83xGLAl_Pc_3BBTt9_36btM8Aad4gAMxfC-9AKQoWfQ6WkfKLZG-7g2ncwp6aNmG7O7UfRumNwssu51gKvOE0sNHKwN1ylkIQ1bLJnE-CIEb9PlaOMIm94qKVrEFloY_IyIicJcpshBIEBUqxHHTZUwGyp2BdXf2D1HbGbYui0xRcdp8MwbgWXJu3gzVh1tgGnQWW20RyI8LqFStfYLxJRmXv3MuLYM1pZGQ4PrNNzWPPalU2aBShsemqJuk0jP3THobQjszT22eUc1S5Atc9TLgvUdO2Y4V8XqB9GwbiIGjTjjSD_8rf3i1QNtZ_yKyqindxdRi47_pby2uUxn-Lc_d_V8Zh5Cmg3MQkZ_ypchh5PcJ6OcqqPIy_VOLBp_d2WQeSOOdD6gH7EVKagmfMcq6DgUccWHb9b9vC3-0G00?></g></svg>